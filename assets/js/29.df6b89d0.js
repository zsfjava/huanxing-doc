(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{310:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"一、概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、概述"}},[t._v("#")]),t._v(" 一、概述")]),t._v(" "),s("p",[t._v("本文档主要是对智能设备平台在进行应用部署的一些规范及注意事项。")]),t._v(" "),s("h2",{attrs:{id:"二、部署说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、部署说明"}},[t._v("#")]),t._v(" 二、部署说明")]),t._v(" "),s("h3",{attrs:{id:"_1-服务配置要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-服务配置要求"}},[t._v("#")]),t._v(" 1. 服务配置要求")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("硬件")]),t._v(" "),s("th",[t._v("要求")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("CPU")]),t._v(" "),s("td",[t._v("8 核+")])]),t._v(" "),s("tr",[s("td",[t._v("内存")]),t._v(" "),s("td",[t._v("16G+")])]),t._v(" "),s("tr",[s("td",[t._v("硬盘")]),t._v(" "),s("td",[t._v("60G+")])])])]),t._v(" "),s("h3",{attrs:{id:"_2-软件配置要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-软件配置要求"}},[t._v("#")]),t._v(" 2. 软件配置要求")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("软件")]),t._v(" "),s("th",[t._v("版本")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("jdk")]),t._v(" "),s("td",[t._v("1.8")])]),t._v(" "),s("tr",[s("td",[t._v("mysql")]),t._v(" "),s("td",[t._v("8.0.30")])]),t._v(" "),s("tr",[s("td",[t._v("redis")]),t._v(" "),s("td",[t._v("6.2.6")])]),t._v(" "),s("tr",[s("td",[t._v("node")]),t._v(" "),s("td",[t._v("14")])]),t._v(" "),s("tr",[s("td",[t._v("maven")]),t._v(" "),s("td",[t._v("3.5.4+")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-软件配置要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-软件配置要求"}},[t._v("#")]),t._v(" 3. 软件配置要求")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("服务名称")]),t._v(" "),s("th",[t._v("部署包名称")]),t._v(" "),s("th",[t._v("启动顺序")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("智能设备注册配置中心")]),t._v(" "),s("td",[t._v("device-register")]),t._v(" "),s("td",[t._v("1")])]),t._v(" "),s("tr",[s("td",[t._v("智能设备用户权限管理模块")]),t._v(" "),s("td",[t._v("device-upms-biz")]),t._v(" "),s("td",[t._v("2")])]),t._v(" "),s("tr",[s("td",[t._v("智能设备认证授权中心")]),t._v(" "),s("td",[t._v("device-auth")]),t._v(" "),s("td",[t._v("3")])]),t._v(" "),s("tr",[s("td",[t._v("智能设备网关服务")]),t._v(" "),s("td",[t._v("device-gateway")]),t._v(" "),s("td",[t._v("4")])]),t._v(" "),s("tr",[s("td",[t._v("智能设备平台后台管理模块")]),t._v(" "),s("td",[t._v("device-platform-admin")]),t._v(" "),s("td",[t._v("5")])]),t._v(" "),s("tr",[s("td",[t._v("智能设备平台后台分析模块")]),t._v(" "),s("td",[t._v("device-platform-analysis")]),t._v(" "),s("td",[t._v("6")])])])]),t._v(" "),s("h2",{attrs:{id:"三、docker-componse-部署服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、docker-componse-部署服务"}},[t._v("#")]),t._v(" 三、docker-componse 部署服务")]),t._v(" "),s("h3",{attrs:{id:"_1-初始化服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-初始化服务器"}},[t._v("#")]),t._v(" 1. 初始化服务器")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" https://pigx.vip/os7init.sh\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" os7init.sh jycloud\n")])])]),s("h3",{attrs:{id:"_2-官网源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-官网源"}},[t._v("#")]),t._v(" 2. 官网源")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum-config-manager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n     --add-repo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n     https://download.docker.com/linux/centos/docker-ce.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#更新源")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum makecache fast\n")])])]),s("h3",{attrs:{id:"_3-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装"}},[t._v("#")]),t._v(" 3. 安装")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce\n")])])]),s("h3",{attrs:{id:"_4-使用加速器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-使用加速器"}},[t._v("#")]),t._v(" 4. 使用加速器")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-sSL")]),t._v(" https://get.daocloud.io/daotools/set_mirror.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" http://2be16b36.m.daocloud.io\n")])])]),s("h3",{attrs:{id:"_5-安装-docker-compose"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装-docker-compose"}},[t._v("#")]),t._v(" 5. 安装 docker-compose")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-L")]),t._v(" https://github.com/docker/compose/releases/download/1.25.0/docker-compose-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("-"),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /usr/local/bin/docker-compose\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" +x /usr/local/bin/docker-compose\n")])])]),s("h3",{attrs:{id:"_6-启动-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动-docker"}},[t._v("#")]),t._v(" 6. 启动 docker")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动Docker服务")]),t._v("\n systemctl start "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置开机自动启动")]),t._v("\n systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看docker的版本,测试是否安装成功")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v("\n")])])]),s("h3",{attrs:{id:"_7-部署服务端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-部署服务端"}},[t._v("#")]),t._v(" 7. 部署服务端")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 项目打包")]),t._v("\n mvn clean "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Dmaven.test.skip")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把项目打zip上传到服务器")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" device.zip\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压zip 并进入项目目录")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" device\n "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动容器  静静等待所有服务启动")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker-compose")]),t._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v("\n")])])]),s("h2",{attrs:{id:"四、前端部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、前端部署"}},[t._v("#")]),t._v(" 四、前端部署")]),t._v(" "),s("h3",{attrs:{id:"官网"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#官网"}},[t._v("#")]),t._v(" 官网")]),t._v(" "),s("p",[t._v("官网：https://nginx.org/")]),t._v(" "),s("h3",{attrs:{id:"_1-创建文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建文件"}},[t._v("#")]),t._v(" 1. 创建文件")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/yum.repos.d/nginx.repo\n")])])]),s("h3",{attrs:{id:"_2-粘贴到新创建的文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-粘贴到新创建的文件"}},[t._v("#")]),t._v(" 2. 粘贴到新创建的文件")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nginx-stable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx stable repo\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://nginx.org/packages/centos/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$releasever")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$basearch")]),t._v("/\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enabled")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://nginx.org/keys/nginx_signing.key\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module_hotfixes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nginx-mainline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx mainline repo\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://nginx.org/packages/mainline/centos/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$releasever")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$basearch")]),t._v("/\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enabled")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://nginx.org/keys/nginx_signing.key\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module_hotfixes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n")])])]),s("h3",{attrs:{id:"_3-安装-nginx-安装中-全部输入-y"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装-nginx-安装中-全部输入-y"}},[t._v("#")]),t._v(" 3. 安装 nginx 安装中 全部输入 y")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/yum.repos.d/nginx.repo\n")])])]),s("h3",{attrs:{id:"_4-新增-device-ui-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-新增-device-ui-conf"}},[t._v("#")]),t._v(" 4. 新增 device-ui.conf")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入 cd /etc/nginx/conf.d")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" device-ui.conf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 粘贴")]),t._v("\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("gzip")]),t._v(" on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_static on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 需要http_gzip_static_module 模块")]),t._v("\n    gzip_min_length 1k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_comp_level "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_proxied any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_types text/plain text/xml text/css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_vary on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    gzip_disable "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MSIE [1-6]\\.(?!.*SV1)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 前端打包好的dist目录文件")]),t._v("\n    root /root/dist/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    location ~* ^/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("auth"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("admin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("monitor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("platform"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("anlys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       proxy_pass http://127.0.0.1:9999"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_connect_timeout 15s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_send_timeout 15s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_read_timeout 15s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_set_header X-Real-IP "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$remote_addr")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_set_header X-Forwarded-For "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$proxy_add_x_forwarded_for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n       proxy_set_header X-Forwarded-Proto http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 避免端点安全问题")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_uri")]),t._v(" ~ "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/actuator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 删除默认conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" default.conf\n\n")])])]),s("h3",{attrs:{id:"_5-修改-nginx-conf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-修改-nginx-conf"}},[t._v("#")]),t._v(" 5. 修改 nginx.conf")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#修改权限  user nginx 改成 user root")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/nginx/nginx.conf\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动")]),t._v("\nnginx\n\n")])])]),s("h3",{attrs:{id:"_6-前端项目打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-前端项目打包"}},[t._v("#")]),t._v(" 6. 前端项目打包")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装前端依赖")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--registry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打包")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上传")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" dist.zip\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 解压")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unzip")]),t._v(" dist\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);